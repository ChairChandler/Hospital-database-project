{"ast":null,"code":"var _jsxFileName = \"/home/chairchandler/Desktop/Bazy Danych/client/src/Shared/SQLTable.js\";\nimport React from 'react';\nimport { DataGrid, ToolbarOptions } from 'tubular-react';\nimport { ColumnModel, ColumnDataType } from 'tubular-common';\nimport { Checkbox, IconButton } from '@material-ui/core';\nimport ExitToAppOutlinedIcon from '@material-ui/icons/ExitToAppOutlined';\nimport { Redirect } from 'react-router-dom';\nexport default class SQLTable extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.logout = () => {\n      const state = this.state;\n      state.redirect = true;\n      this.setState(state);\n    };\n\n    this.createColumns = () => {\n      this.columns = this.props.headers.map(({\n        header,\n        label,\n        visible\n      }) => new ColumnModel(header, {\n        sortable: true,\n        searchable: true,\n        label: label,\n        visible: visible,\n        dataType: ColumnDataType.String\n      }));\n      this.columns.push(new ColumnModel('rownum', {\n        visible: false,\n        isKey: true\n      }));\n    };\n\n    this.createRows = () => {\n      if (this.props.selectRowChecbox) {\n        this.columns.push(new ColumnModel('selected', {\n          label: ' '\n        }));\n        this.rows = this.props.rows.map((val, indx) => {\n          val['selected'] = React.createElement(Checkbox, {\n            onClick: this.onRowClick.bind(this, val),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 49\n            },\n            __self: this\n          });\n          val['rownum'] = indx;\n\n          for (const key in val) {\n            if (val[key] === null) {\n              val[key] = '';\n            } else {\n              val[key] = val[key].toString();\n            }\n          }\n\n          return val;\n        });\n      } else {\n        this.rows = this.props.rows.map((val, indx) => {\n          val['rownum'] = indx;\n\n          for (const key in val) {\n            if (val[key] === null) {\n              val[key] = '';\n            }\n          }\n\n          return val;\n        });\n      }\n    };\n\n    this.createToolbar = () => {\n      this.toolbarButton = new ToolbarOptions({\n        customItems: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, this.props.children, React.createElement(IconButton, {\n          onClick: this.logout,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, React.createElement(ExitToAppOutlinedIcon, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }))),\n        exportButton: false,\n        printButton: false\n      });\n    };\n\n    this.onRowClick = row => {\n      const state = this.state;\n      const indx = state.clickedRows.findIndex(val => val.rownum === row.rownum);\n\n      if (indx < 0) {\n        state.clickedRows.push(row);\n      } else {\n        state.clickedRows.splice(indx, 1);\n      }\n\n      this.setState(state);\n      this.props.onRowClick(state.clickedRows);\n    };\n\n    this.render = () => {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(DataGrid, {\n        gridName: \"\",\n        columns: this.state.columns,\n        dataSource: this.state.rows,\n        toolbarOptions: this.toolbarButton,\n        onError: err => alert(err),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), this.state.redirect && React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }));\n    };\n\n    this.createToolbar();\n    this.createColumns();\n    this.createRows();\n    this.state = {\n      clickedRows: [],\n      rows: this.rows,\n      columns: this.columns,\n      redirect: false\n    };\n  }\n\n}","map":{"version":3,"sources":["/home/chairchandler/Desktop/Bazy Danych/client/src/Shared/SQLTable.js"],"names":["React","DataGrid","ToolbarOptions","ColumnModel","ColumnDataType","Checkbox","IconButton","ExitToAppOutlinedIcon","Redirect","SQLTable","Component","constructor","props","logout","state","redirect","setState","createColumns","columns","headers","map","header","label","visible","sortable","searchable","dataType","String","push","isKey","createRows","selectRowChecbox","rows","val","indx","onRowClick","bind","key","toString","createToolbar","toolbarButton","customItems","children","exportButton","printButton","row","clickedRows","findIndex","rownum","splice","render","err","alert"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { DataGrid, ToolbarOptions } from 'tubular-react';\nimport { ColumnModel, ColumnDataType} from 'tubular-common';\nimport { Checkbox, IconButton } from '@material-ui/core';\nimport ExitToAppOutlinedIcon from '@material-ui/icons/ExitToAppOutlined';\nimport { Redirect } from 'react-router-dom';\n\nexport default class SQLTable extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.createToolbar()\n    this.createColumns()\n    this.createRows()\n\n    this.state = {\n      clickedRows: [],\n      rows: this.rows,\n      columns: this.columns,\n      redirect : false\n    }\n  }\n\n  logout = () => {\n    const state = this.state\n    state.redirect = true\n    this.setState(state)\n  }\n\n  createColumns = () => {\n    this.columns = this.props.headers.map(({header, label, visible}) => \n    new ColumnModel(header, {\n      sortable: true,\n      searchable: true,\n      label: label,\n      visible: visible,\n      dataType: ColumnDataType.String\n    }))\n    this.columns.push(new ColumnModel('rownum', {\n      visible: false,\n      isKey: true\n    }))\n  }\n\n  createRows = () => {\n    if(this.props.selectRowChecbox) {\n      this.columns.push(new ColumnModel('selected', {label: ' '}))\n      this.rows = this.props.rows.map((val, indx) => {\n          val['selected'] = <Checkbox onClick={this.onRowClick.bind(this, val)}></Checkbox>\n          val['rownum'] = indx\n          for(const key in val) {\n            if(val[key] === null) {\n              val[key] = ''\n            } else {\n              val[key] = val[key].toString()\n            }\n          }\n          return val\n      })\n    } else {\n      this.rows = this.props.rows.map((val, indx) => {\n        val['rownum'] = indx\n        for(const key in val) {\n          if(val[key] === null) {\n            val[key] = ''\n          }\n        }\n        return val\n      })\n    }\n  }\n  \n  createToolbar = () => {\n    this.toolbarButton = new ToolbarOptions({\n      customItems: (\n      <div>\n        {this.props.children}\n        <IconButton onClick={this.logout}>\n          <ExitToAppOutlinedIcon/>\n        </IconButton>\n      </div>),\n      exportButton: false,\n      printButton: false\n    });\n  }\n\n  onRowClick = (row) => {\n    const state = this.state\n    const indx = state.clickedRows.findIndex((val) => val.rownum === row.rownum)\n    if(indx < 0) {  \n      state.clickedRows.push(row)\n    } else {\n      state.clickedRows.splice(indx, 1)\n    }\n\n    this.setState(state)\n    this.props.onRowClick(state.clickedRows)\n  } \n  \n  render = () => {\n    return (\n      <div>\n        <DataGrid\n        gridName=''\n        columns={this.state.columns}\n        dataSource={this.state.rows}\n        toolbarOptions={this.toolbarButton}\n        onError={(err) => alert(err)}\n      />\n\n      {this.state.redirect && (<Redirect to='/login'/>)}\n    </div>\n  )}\n}"]},"metadata":{},"sourceType":"module"}