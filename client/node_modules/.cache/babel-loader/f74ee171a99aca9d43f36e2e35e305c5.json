{"ast":null,"code":"import _slicedToArray from \"/home/chairchandler/Desktop/Bazy Danych/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/chairchandler/Desktop/Bazy Danych/client/src/DirectorPanel/Dialogs/TreatmentDialogs.js\";\nimport React, { Fragment } from 'react';\nimport { FormDialog, QuestionDialog } from '../../Shared/Dialog';\nimport { TextField, Grid, Switch } from '@material-ui/core';\nexport class AddTreatmentTypeDialog extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.validate = () => {\n      const treatmentCreate = this.props.treatments.some(treat => treat.typ === this.state.inputs.type_name);\n      const hour = this.state.inputs.duration.getHours();\n      const minutes = this.state.inputs.duration.getMinutes();\n      return {\n        //true means error\n        errors: {\n          type_name: this.state.inputs.type_name.length === 0 || treatmentCreate,\n          duration: hour === 10 && minutes || hour === 0 && minutes < 5,\n          specs: !this.state.inputs.specs.some(val => val.checked)\n        },\n        errorsLabel: {\n          type_name: this.state.inputs.type_name.length === 0 ? 'Pusta nazwa zabiegu' : treatmentCreate ? 'Taki zabieg jest już oferowany' : '',\n          duration: hour === 10 && minutes || hour === 0 && minutes < 5 ? 'Niewłaściwy format czasu <00:05 ; 10:00>' : '',\n          specs: !this.state.inputs.specs.some(val => val.checked) ? 'Należy wybrać min. 1 specjalizację' : ''\n        }\n      };\n    };\n\n    this.setInputValue = (name, val) => {\n      const state = this.state;\n      state.inputs[name] = val;\n      this.setState(state);\n    };\n\n    this.exit = () => {\n      const state = this.state;\n      state.isCancelled = true;\n      this.setState(state);\n    };\n\n    this.setErrors = (errors, label) => {\n      const state = this.state;\n      state.errors = errors;\n      state.errorsLabel = label;\n      this.setState(state);\n    };\n\n    this.submit = button => {\n      if (button === 'cancel') {\n        this.exit();\n        this.props.onClose(button);\n      } else {\n        const errors = this.validate();\n        const isError = Object.keys(errors.errors).some(key => errors.errors[key]);\n\n        if (isError) {\n          this.setErrors(errors.errors, errors.errorsLabel);\n        } else {\n          this.props.setData(this.state.inputs);\n          this.exit();\n          this.props.onClose(button);\n        }\n      }\n    };\n\n    this.convertTimeToString = time => {\n      let hour = time.getHours().toString();\n      let minutes = time.getMinutes().toString();\n\n      if (hour.length !== 2) {\n        hour = '0' + hour;\n      }\n\n      if (minutes.length !== 2) {\n        minutes = '0' + minutes;\n      }\n\n      return `${hour}:${minutes}`;\n    };\n\n    this.convertStringToTime = string => {\n      const _string$split = string.split(':'),\n            _string$split2 = _slicedToArray(_string$split, 2),\n            h = _string$split2[0],\n            m = _string$split2[1];\n\n      const time = new Date();\n      time.setHours(h, m);\n      return time;\n    };\n\n    this.setSpec = (name, val) => {\n      const state = this.state;\n      const x = state.inputs.specs.find(obj => obj.name === name);\n      x.checked = val;\n      this.setState(state);\n    };\n\n    this.render = () => {\n      return !this.state.isCancelled && React.createElement(FormDialog, {\n        title: this.props.title,\n        isOpen: true,\n        message: this.props.message,\n        onClose: type => {\n          this.submit(type);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        autoFocus: true,\n        required: true,\n        error: this.state.errors.type_name,\n        helperText: this.state.errorsLabel.type_name,\n        margin: \"dense\",\n        id: \"type_name\",\n        label: \"Nazwa zabiegu\",\n        type: \"text\",\n        fullWidth: true,\n        onChange: event => {\n          if (event.target.value !== null) this.setInputValue('type_name', event.target.value);\n        },\n        inputProps: {\n          maxLength: 45\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        style: {\n          \"paddingRight\": '5px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Cena  \"), React.createElement(\"input\", {\n        type: \"number\",\n        min: \"0\",\n        max: \"1000000\",\n        value: this.state.inputs.price,\n        onChange: event => {\n          this.setInputValue('price', event.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        style: {\n          \"paddingRight\": '5px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, this.state.errors.duration ? this.state.errorsLabel.duration : 'Czas'), React.createElement(\"input\", {\n        type: \"time\",\n        name: \"duration\",\n        required: true,\n        min: \"00:05\",\n        max: \"10:00\",\n        value: this.convertTimeToString(this.state.inputs.duration),\n        onChange: event => {\n          this.setInputValue('duration', this.convertStringToTime(event.target.value));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, this.state.inputs.specs.length && React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, this.state.errors.specs ? this.state.errorsLabel.specs : 'Specjalizacje'), this.state.inputs.specs.map(val => React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        style: {\n          paddingRight: \"5px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, val.name)), React.createElement(Grid, {\n        item: true,\n        xs: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        checked: val.checked,\n        onChange: event => {\n          if (event.target.value !== null) this.setSpec(val.name, event.target.checked);\n        },\n        inputProps: {\n          'aria-label': 'primary checkbox'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }))))));\n    };\n\n    const _time = new Date();\n\n    _time.setHours(0, 5);\n\n    this.state = {\n      inputs: {\n        type_name: '',\n        price: 0,\n        duration: _time,\n        specs: this.props.specs.map(val => ({\n          name: val.nazwa,\n          checked: false\n        }))\n      },\n      errors: {\n        type_name: false,\n        duration: false,\n        specs: false\n      },\n      errorsLabel: {\n        type_name: '',\n        duration: '',\n        specs: ''\n      },\n      isCancelled: false\n    };\n  }\n\n}\nexport const DeleteTreatmentTypeDialog = ({\n  isOpen,\n  title,\n  onClose\n}) => React.createElement(QuestionDialog, {\n  isOpen: isOpen,\n  title: title,\n  question: \"Czy jestes pewny?\",\n  answers: ['cancel', 'delete'],\n  onClose: onClose,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 170\n  },\n  __self: this\n});","map":{"version":3,"sources":["/home/chairchandler/Desktop/Bazy Danych/client/src/DirectorPanel/Dialogs/TreatmentDialogs.js"],"names":["React","Fragment","FormDialog","QuestionDialog","TextField","Grid","Switch","AddTreatmentTypeDialog","Component","constructor","props","validate","treatmentCreate","treatments","some","treat","typ","state","inputs","type_name","hour","duration","getHours","minutes","getMinutes","errors","length","specs","val","checked","errorsLabel","setInputValue","name","setState","exit","isCancelled","setErrors","label","submit","button","onClose","isError","Object","keys","key","setData","convertTimeToString","time","toString","convertStringToTime","string","split","h","m","Date","setHours","setSpec","x","find","obj","render","title","message","type","event","target","value","maxLength","price","map","paddingRight","nazwa","DeleteTreatmentTypeDialog","isOpen"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react';\nimport { FormDialog, QuestionDialog } from '../../Shared/Dialog';\nimport { TextField, Grid, Switch } from '@material-ui/core';\n\nexport class AddTreatmentTypeDialog extends React.Component { \n    constructor(props) {\n    super(props)\n    \n    const time = new Date()\n    time.setHours(0, 5)\n\n    this.state = {\n      inputs: {\n        type_name: '',\n        price: 0,\n        duration: time,\n        specs: this.props.specs.map(val => ({name: val.nazwa, checked: false}))\n      },\n      errors: {\n        type_name: false,\n        duration: false,\n        specs: false\n      },\n      errorsLabel: {\n        type_name: '',\n        duration: '',\n        specs: ''\n      },\n      isCancelled: false,\n    } \n  }\n\n  validate = () => {\n    const treatmentCreate = this.props.treatments.some(treat => treat.typ === this.state.inputs.type_name)\n    const hour = this.state.inputs.duration.getHours()\n    const minutes = this.state.inputs.duration.getMinutes()\n    return { //true means error\n      errors: {\n        type_name: this.state.inputs.type_name.length === 0 || treatmentCreate,\n        duration: (hour === 10 && minutes) || (hour === 0 && minutes < 5),\n        specs: !this.state.inputs.specs.some(val => val.checked)\n      },\n      errorsLabel: {\n        type_name: this.state.inputs.type_name.length === 0 ? 'Pusta nazwa zabiegu' : (treatmentCreate ? 'Taki zabieg jest już oferowany' : ''),\n        duration: ((hour === 10 && minutes) || (hour === 0 && minutes < 5)) ? 'Niewłaściwy format czasu <00:05 ; 10:00>' : '',\n        specs: !this.state.inputs.specs.some(val => val.checked) ? 'Należy wybrać min. 1 specjalizację' : ''\n      }\n    }\n  }\n\n  setInputValue = (name, val) => {\n    const state = this.state\n    state.inputs[name] = val\n    this.setState(state)\n  }\n\n  exit = () => {\n    const state = this.state\n    state.isCancelled = true\n    this.setState(state)\n  }\n\n  setErrors = (errors, label) => {\n    const state = this.state\n    state.errors = errors\n    state.errorsLabel = label\n    this.setState(state)\n  }\n\n  submit = (button) => {\n    if(button === 'cancel') {\n      this.exit()\n      this.props.onClose(button)\n    } else {\n      const errors = this.validate()\n      const isError = Object.keys(errors.errors).some(key => errors.errors[key])\n      \n      if(isError) {\n        this.setErrors(errors.errors, errors.errorsLabel)\n      } else {\n        this.props.setData(this.state.inputs)\n        this.exit()\n        this.props.onClose(button)\n      }\n    }\n  }\n\n  convertTimeToString = (time) => {\n      let hour = time.getHours().toString()\n      let minutes = time.getMinutes().toString()\n\n      if(hour.length !== 2) {\n          hour = '0' + hour\n      }\n\n      if(minutes.length !== 2) {\n        minutes = '0' + minutes\n      }\n\n      return `${hour}:${minutes}`\n    }\n\n    convertStringToTime = (string) => {\n        const [h, m] = string.split(':')\n        const time = new Date()\n        time.setHours(h, m)\n        return time\n      }\n\n    setSpec = (name, val) => {\n        const state = this.state\n        const x = state.inputs.specs.find(obj => obj.name === name)\n        x.checked = val\n        this.setState(state)\n    }\n\n  render = () => {\n    return !this.state.isCancelled && (\n    <FormDialog title={this.props.title} isOpen={true} message={this.props.message} onClose={(type) => {this.submit(type)}}>\n\n        <TextField\n        autoFocus\n        required\n        error={this.state.errors.type_name}\n        helperText={this.state.errorsLabel.type_name}\n        margin=\"dense\"\n        id=\"type_name\"\n        label=\"Nazwa zabiegu\"\n        type=\"text\"\n        fullWidth\n        onChange={(event) => {if(event.target.value !== null) this.setInputValue('type_name', event.target.value)}}\n        inputProps={{ maxLength: 45 }}\n        />\n\n        <div>\n        <label style={{\"paddingRight\": '5px'}}>Cena  </label>\n        <input type=\"number\" min=\"0\" max=\"1000000\" value={this.state.inputs.price} onChange={(event) => {this.setInputValue('price', event.target.value)}}/>\n        </div>\n\n        <div></div>\n\n        <div>\n        <label style={{\"paddingRight\": '5px'}}>{this.state.errors.duration ? this.state.errorsLabel.duration : 'Czas'}</label>\n        <input type=\"time\" name=\"duration\" required min=\"00:05\" max=\"10:00\" value={this.convertTimeToString(this.state.inputs.duration)} onChange={(event) => {this.setInputValue('duration', this.convertStringToTime(event.target.value))}}></input>\n        </div>\n\n        <Grid container>\n            {this.state.inputs.specs.length && (<label>{this.state.errors.specs ? this.state.errorsLabel.specs : 'Specjalizacje'}</label>)}\n            {this.state.inputs.specs.map(val => (\n                <Fragment>\n                    <Grid item xs={4}>\n                        <label style={{paddingRight: \"5px\"}}>{val.name}</label>\n                    </Grid>\n                    <Grid item xs={8}>\n                        <Switch\n                        checked={val.checked}\n                        onChange={(event) => {if(event.target.value !== null) this.setSpec(val.name, event.target.checked)}}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        />\n                    </Grid>\n                </Fragment>\n            ))}\n        </Grid>\n\n    </FormDialog>\n  )}\n}\n\nexport const DeleteTreatmentTypeDialog = ({isOpen, title, onClose}) =>\n  <QuestionDialog isOpen={isOpen} title={title} question=\"Czy jestes pewny?\" answers={['cancel', 'delete']} onClose={onClose}/>"]},"metadata":{},"sourceType":"module"}