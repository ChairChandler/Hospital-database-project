{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar format_1 = require(\"date-fns/format\");\n\nvar getYear_1 = require(\"date-fns/getYear\");\n\nvar parseISO_1 = require(\"date-fns/parseISO\");\n\nvar _1 = require(\".\");\n\nexports.parsePayload = function (row, columns) {\n  return columns.reduce(function (obj, column, key) {\n    obj[column.name] = row[key] || row[column.name];\n    return obj;\n  }, {});\n};\n\nexports.formatDate = function (value, formatString) {\n  if (formatString === void 0) {\n    formatString = 'M/d/yyyy';\n  }\n\n  if (!value) {\n    return '';\n  }\n\n  var parsedValue = parseISO_1.default(value);\n  return getYear_1.default(parsedValue) > 0 ? format_1.default(parsedValue, formatString) : '';\n};\n\nexports.getColumnAlign = function (column) {\n  switch (column.dataType) {\n    case _1.ColumnDataType.Numeric:\n      return 'right';\n\n    case _1.ColumnDataType.Boolean:\n      return 'center';\n\n    default:\n      return 'inherit';\n  }\n};\n\nvar getCellValue = function (cellDataType, cell) {\n  switch (cellDataType) {\n    case _1.ColumnDataType.Date:\n      return exports.formatDate(cell, 'M/d/yyyy');\n\n    case _1.ColumnDataType.DateTime:\n    case _1.ColumnDataType.DateTimeUtc:\n      return exports.formatDate(cell, 'M/d/yyyy h:mm a');\n\n    case _1.ColumnDataType.Boolean:\n      return cell === true ? 'Yes' : 'No';\n\n    default:\n      return (cell || '').toString();\n  }\n};\n\nvar objToArray = function (row) {\n  return row instanceof Object ? Object.keys(row).map(function (key) {\n    return row[key];\n  }) : row;\n};\n\nvar processRow = function (row, columns, ignoreType) {\n  var finalVal = objToArray(row).reduce(function (prev, value, i) {\n    if (!columns[i].visible) {\n      return;\n    }\n\n    var result = getCellValue(ignoreType ? _1.ColumnDataType.String : columns[i].dataType, value).replace(/\"/g, '\"\"');\n\n    if (result.search(/(\"|,|\\n)/g) >= 0) {\n      result = \"\\\"\" + result + \"\\\"\";\n    }\n\n    return \"\" + (prev !== undefined ? prev : '') + (i > 0 && prev !== undefined ? ',' : '') + result;\n  }, '');\n  return finalVal + \"\\n\";\n};\n\nexports.getCsv = function (gridResult, columns) {\n  return gridResult.reduce(function (prev, row) {\n    return prev + processRow(row, columns, false);\n  }, processRow(columns.map(function (x) {\n    return x.label;\n  }), columns, true));\n};\n\nexports.getHtml = function (gridResult, columns) {\n  return \"<table class=\\\"table table-bordered table-striped\\\"><thead><tr>\" + columns.filter(function (c) {\n    return c.visible;\n  }).reduce(function (prev, el) {\n    return prev + \"<th>\" + (el.label || el.name) + \"</th>\";\n  }, '') + \"</tr></thead><tbody>\" + gridResult.reduce(function (prevRow, row) {\n    return prevRow + \"<tr>\" + objToArray(row).reduce(function (prev, cell, index) {\n      return !columns[index].visible ? prev : prev + \"<td>\" + getCellValue(columns[index].dataType, cell) + \"</td>\";\n    }, '') + \"</tr>\";\n  }, '') + \"</tbody></table>\";\n};","map":{"version":3,"sources":["/home/chairchandler/Desktop/Bazy Danych/client/node_modules/tubular-common/dist/utils.js"],"names":["Object","defineProperty","exports","value","format_1","require","getYear_1","parseISO_1","_1","parsePayload","row","columns","reduce","obj","column","key","name","formatDate","formatString","parsedValue","default","getColumnAlign","dataType","ColumnDataType","Numeric","Boolean","getCellValue","cellDataType","cell","Date","DateTime","DateTimeUtc","toString","objToArray","keys","map","processRow","ignoreType","finalVal","prev","i","visible","result","String","replace","search","undefined","getCsv","gridResult","x","label","getHtml","filter","c","el","prevRow","index"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar format_1 = require(\"date-fns/format\");\nvar getYear_1 = require(\"date-fns/getYear\");\nvar parseISO_1 = require(\"date-fns/parseISO\");\nvar _1 = require(\".\");\nexports.parsePayload = function (row, columns) {\n    return columns.reduce(function (obj, column, key) {\n        obj[column.name] = row[key] || row[column.name];\n        return obj;\n    }, {});\n};\nexports.formatDate = function (value, formatString) {\n    if (formatString === void 0) { formatString = 'M/d/yyyy'; }\n    if (!value) {\n        return '';\n    }\n    var parsedValue = parseISO_1.default(value);\n    return getYear_1.default(parsedValue) > 0 ? format_1.default(parsedValue, formatString) : '';\n};\nexports.getColumnAlign = function (column) {\n    switch (column.dataType) {\n        case _1.ColumnDataType.Numeric:\n            return 'right';\n        case _1.ColumnDataType.Boolean:\n            return 'center';\n        default:\n            return 'inherit';\n    }\n};\nvar getCellValue = function (cellDataType, cell) {\n    switch (cellDataType) {\n        case _1.ColumnDataType.Date:\n            return exports.formatDate(cell, 'M/d/yyyy');\n        case _1.ColumnDataType.DateTime:\n        case _1.ColumnDataType.DateTimeUtc:\n            return exports.formatDate(cell, 'M/d/yyyy h:mm a');\n        case _1.ColumnDataType.Boolean:\n            return cell === true ? 'Yes' : 'No';\n        default:\n            return (cell || '').toString();\n    }\n};\nvar objToArray = function (row) {\n    return row instanceof Object ? Object.keys(row).map(function (key) { return row[key]; }) : row;\n};\nvar processRow = function (row, columns, ignoreType) {\n    var finalVal = objToArray(row).reduce(function (prev, value, i) {\n        if (!columns[i].visible) {\n            return;\n        }\n        var result = getCellValue(ignoreType ? _1.ColumnDataType.String : columns[i].dataType, value).replace(/\"/g, '\"\"');\n        if (result.search(/(\"|,|\\n)/g) >= 0) {\n            result = \"\\\"\" + result + \"\\\"\";\n        }\n        return \"\" + (prev !== undefined ? prev : '') + (i > 0 && prev !== undefined ? ',' : '') + result;\n    }, '');\n    return finalVal + \"\\n\";\n};\nexports.getCsv = function (gridResult, columns) {\n    return gridResult.reduce(function (prev, row) { return prev + processRow(row, columns, false); }, processRow(columns.map(function (x) { return x.label; }), columns, true));\n};\nexports.getHtml = function (gridResult, columns) {\n    return \"<table class=\\\"table table-bordered table-striped\\\"><thead><tr>\" + columns\n        .filter(function (c) { return c.visible; })\n        .reduce(function (prev, el) { return prev + \"<th>\" + (el.label || el.name) + \"</th>\"; }, '') + \"</tr></thead><tbody>\" + gridResult.reduce(function (prevRow, row) {\n        return prevRow + \"<tr>\" + objToArray(row).reduce(function (prev, cell, index) {\n            return !columns[index].visible ? prev : prev + \"<td>\" + getCellValue(columns[index].dataType, cell) + \"</td>\";\n        }, '') + \"</tr>\";\n    }, '') + \"</tbody></table>\";\n};\n"]},"metadata":{},"sourceType":"script"}