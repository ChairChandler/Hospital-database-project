{"ast":null,"code":"var _jsxFileName = \"/home/chairchandler/Desktop/Bazy Danych/client/src/Shared/SQLTable.js\";\nimport React from 'react';\nimport { DataGrid, ToolbarOptions } from 'tubular-react';\nimport { ColumnModel } from 'tubular-common';\nimport { Checkbox } from '@material-ui/core';\nimport { createRenderer } from 'react-dom/test-utils';\nexport default class SQLTable extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.createColumns = () => {\n      this.columns = this.props.headers.map(({\n        header,\n        label\n      }, colnum) => new ColumnModel(header, {\n        sortable: true,\n        searchable: true\n      }));\n      this.columns.push(new ColumnModel('rownum', {\n        visible: false,\n        isKey: true\n      }));\n    };\n\n    this.createRows = () => {\n      if (this.props.selectRowChecbox) {\n        this.columns.push(new ColumnModel('selected', {\n          label: ' '\n        }));\n        this.rows = this.props.rows.map((val, indx) => {\n          val['selected'] = React.createElement(Checkbox, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 37\n            },\n            __self: this\n          });\n          val['rownum'] = indx;\n          return val;\n        });\n      } else {\n        this.rows = this.props.rows.map((val, indx) => {\n          val['rownum'] = indx;\n          return val;\n        });\n      }\n    };\n\n    this.createToolbar = () => {\n      this.toolbarButton = new ToolbarOptions({\n        customItems: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }, this.props.children)\n      });\n    };\n\n    this.onRowClick = row => {\n      let indx = this.state.clickedRows.findIndex(val => val.rownum === row.rownum);\n\n      if (indx < 0) {\n        this.state.clickedRows.push(row);\n\n        this.state.rows[row.rownum].selected = () => React.createElement(Checkbox, {\n          checked: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        });\n      } else {\n        this.state.clickedRows.splice(indx, 1);\n      }\n\n      this.setState({\n        clickedRows: this.state.clickedRows,\n        rows: this.state.rows\n      });\n      this.props.onRowClick(this.state.clickedRows);\n    };\n\n    this.render = () => {\n      return React.createElement(DataGrid, {\n        columns: this.columns,\n        dataSource: this.state.rows,\n        gridName: this.props.title,\n        onRowClick: this.props.selectRowChecbox ? this.onRowClick : this.props.onRowClick,\n        toolbarOptions: this.toolbarButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      });\n    };\n\n    this.createToolbar();\n    this.createColumns();\n    this.createRows();\n    this.state = {\n      clickedRows: [],\n      rows: this.rows\n    };\n  }\n\n}","map":{"version":3,"sources":["/home/chairchandler/Desktop/Bazy Danych/client/src/Shared/SQLTable.js"],"names":["React","DataGrid","ToolbarOptions","ColumnModel","Checkbox","createRenderer","SQLTable","Component","constructor","props","createColumns","columns","headers","map","header","label","colnum","sortable","searchable","push","visible","isKey","createRows","selectRowChecbox","rows","val","indx","createToolbar","toolbarButton","customItems","children","onRowClick","row","state","clickedRows","findIndex","rownum","selected","splice","setState","render","title"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { DataGrid, ToolbarOptions } from 'tubular-react';\nimport { ColumnModel} from 'tubular-common';\nimport { Checkbox } from '@material-ui/core';\nimport { createRenderer } from 'react-dom/test-utils';\n\nexport default class SQLTable extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.createToolbar()\n    this.createColumns()\n    this.createRows()\n\n    this.state = {\n      clickedRows: [],\n      rows: this.rows\n    }\n  }\n\n  createColumns = () => {\n    this.columns = this.props.headers.map(({header, label}, colnum) => \n    new ColumnModel(header, {\n      sortable: true,\n      searchable: true\n    }))\n    this.columns.push(new ColumnModel('rownum', {\n      visible: false,\n      isKey: true\n    }))\n  }\n\n  createRows = () => {\n    if(this.props.selectRowChecbox) {\n      this.columns.push(new ColumnModel('selected', {label: ' '}))\n      this.rows = this.props.rows.map((val, indx) => {\n          val['selected'] = <Checkbox></Checkbox>\n          val['rownum'] = indx\n          return val\n      })\n    } else {\n      this.rows = this.props.rows.map((val, indx) => {\n        val['rownum'] = indx\n        return val\n      })\n    }\n  }\n\n  createToolbar = () => {\n    this.toolbarButton = new ToolbarOptions({\n      customItems: <div>{this.props.children}</div>\n    });\n  }\n\n  onRowClick = (row) => {\n    let indx = this.state.clickedRows.findIndex((val) => val.rownum === row.rownum)\n    if(indx < 0) {  \n      this.state.clickedRows.push(row)\n      this.state.rows[row.rownum].selected = () => <Checkbox checked={true}></Checkbox>\n    } else {\n      this.state.clickedRows.splice(indx, 1)\n    }\n\n    this.setState({\n      clickedRows: this.state.clickedRows,\n      rows: this.state.rows\n    })\n    this.props.onRowClick(this.state.clickedRows)\n  } \n\n  render = () => {\n    return (\n      <DataGrid\n      columns={this.columns}\n      dataSource={this.state.rows}\n      gridName={this.props.title}\n      onRowClick={this.props.selectRowChecbox ? this.onRowClick : this.props.onRowClick}\n      toolbarOptions={this.toolbarButton}\n    />\n  )}\n}"]},"metadata":{},"sourceType":"module"}