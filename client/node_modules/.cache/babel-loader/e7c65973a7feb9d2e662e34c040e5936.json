{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar uno_js_1 = require(\"uno-js\");\n\nvar _1 = require(\".\");\n\nexports.parsePayload = function (row, columns) {\n  return columns.reduce(function (obj, column, key) {\n    obj[column.name] = row[key] || row[column.name];\n    return obj;\n  }, {});\n};\n\nexports.formatDate = function (value, formatString) {\n  if (formatString === void 0) {\n    formatString = 'M/d/yyyy';\n  }\n\n  if (!value) {\n    return '';\n  }\n\n  var parsedValue = uno_js_1.parseISO(value); // TODO: Pending format\n\n  return isNaN(parsedValue.getTime()) ? '' : parsedValue.toLocaleDateString();\n};\n\nexports.getColumnAlign = function (column) {\n  switch (column.dataType) {\n    case _1.ColumnDataType.Numeric:\n      return 'right';\n\n    case _1.ColumnDataType.Boolean:\n      return 'center';\n\n    default:\n      return 'inherit';\n  }\n};\n\nvar getCellValue = function (cellDataType, cell) {\n  switch (cellDataType) {\n    case _1.ColumnDataType.Date:\n      return exports.formatDate(cell, 'M/d/yyyy');\n\n    case _1.ColumnDataType.DateTime:\n    case _1.ColumnDataType.DateTimeUtc:\n      return exports.formatDate(cell, 'M/d/yyyy h:mm a');\n\n    case _1.ColumnDataType.Boolean:\n      return cell === true ? 'Yes' : 'No';\n\n    default:\n      return (cell || '').toString();\n  }\n};\n\nvar objToArray = function (row) {\n  return row instanceof Object ? Object.keys(row).map(function (key) {\n    return row[key];\n  }) : row;\n};\n\nvar processRow = function (row, columns, ignoreType) {\n  var finalVal = objToArray(row).reduce(function (prev, value, i) {\n    if (!columns[i].visible) {\n      return;\n    }\n\n    var result = getCellValue(ignoreType ? _1.ColumnDataType.String : columns[i].dataType, value).replace(/\"/g, '\"\"');\n\n    if (result.search(/(\"|,|\\n)/g) >= 0) {\n      result = \"\\\"\" + result + \"\\\"\";\n    }\n\n    return \"\" + (prev !== undefined ? prev : '') + (i > 0 && prev !== undefined ? ',' : '') + result;\n  }, '');\n  return finalVal + \"\\n\";\n};\n\nexports.getCsv = function (gridResult, columns) {\n  return gridResult.reduce(function (prev, row) {\n    return prev + processRow(row, columns, false);\n  }, processRow(columns.map(function (x) {\n    return x.label;\n  }), columns, true));\n};\n\nexports.getHtml = function (gridResult, columns) {\n  return \"<table class=\\\"table table-bordered table-striped\\\"><thead><tr>\" + columns.filter(function (c) {\n    return c.visible;\n  }).reduce(function (prev, el) {\n    return prev + \"<th>\" + (el.label || el.name) + \"</th>\";\n  }, '') + \"</tr></thead><tbody>\" + gridResult.reduce(function (prevRow, row) {\n    return prevRow + \"<tr>\" + objToArray(row).reduce(function (prev, cell, index) {\n      return !columns[index].visible ? prev : prev + \"<td>\" + getCellValue(columns[index].dataType, cell) + \"</td>\";\n    }, '') + \"</tr>\";\n  }, '') + \"</tbody></table>\";\n};","map":{"version":3,"sources":["/home/chairchandler/Desktop/Bazy Danych/client/node_modules/tubular-common/dist/utils.js"],"names":["Object","defineProperty","exports","value","uno_js_1","require","_1","parsePayload","row","columns","reduce","obj","column","key","name","formatDate","formatString","parsedValue","parseISO","isNaN","getTime","toLocaleDateString","getColumnAlign","dataType","ColumnDataType","Numeric","Boolean","getCellValue","cellDataType","cell","Date","DateTime","DateTimeUtc","toString","objToArray","keys","map","processRow","ignoreType","finalVal","prev","i","visible","result","String","replace","search","undefined","getCsv","gridResult","x","label","getHtml","filter","c","el","prevRow","index"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar uno_js_1 = require(\"uno-js\");\nvar _1 = require(\".\");\nexports.parsePayload = function (row, columns) {\n    return columns.reduce(function (obj, column, key) {\n        obj[column.name] = row[key] || row[column.name];\n        return obj;\n    }, {});\n};\nexports.formatDate = function (value, formatString) {\n    if (formatString === void 0) { formatString = 'M/d/yyyy'; }\n    if (!value) {\n        return '';\n    }\n    var parsedValue = uno_js_1.parseISO(value);\n    // TODO: Pending format\n    return isNaN(parsedValue.getTime()) ? '' : parsedValue.toLocaleDateString();\n};\nexports.getColumnAlign = function (column) {\n    switch (column.dataType) {\n        case _1.ColumnDataType.Numeric:\n            return 'right';\n        case _1.ColumnDataType.Boolean:\n            return 'center';\n        default:\n            return 'inherit';\n    }\n};\nvar getCellValue = function (cellDataType, cell) {\n    switch (cellDataType) {\n        case _1.ColumnDataType.Date:\n            return exports.formatDate(cell, 'M/d/yyyy');\n        case _1.ColumnDataType.DateTime:\n        case _1.ColumnDataType.DateTimeUtc:\n            return exports.formatDate(cell, 'M/d/yyyy h:mm a');\n        case _1.ColumnDataType.Boolean:\n            return cell === true ? 'Yes' : 'No';\n        default:\n            return (cell || '').toString();\n    }\n};\nvar objToArray = function (row) {\n    return row instanceof Object ? Object.keys(row).map(function (key) { return row[key]; }) : row;\n};\nvar processRow = function (row, columns, ignoreType) {\n    var finalVal = objToArray(row).reduce(function (prev, value, i) {\n        if (!columns[i].visible) {\n            return;\n        }\n        var result = getCellValue(ignoreType ? _1.ColumnDataType.String : columns[i].dataType, value).replace(/\"/g, '\"\"');\n        if (result.search(/(\"|,|\\n)/g) >= 0) {\n            result = \"\\\"\" + result + \"\\\"\";\n        }\n        return \"\" + (prev !== undefined ? prev : '') + (i > 0 && prev !== undefined ? ',' : '') + result;\n    }, '');\n    return finalVal + \"\\n\";\n};\nexports.getCsv = function (gridResult, columns) {\n    return gridResult.reduce(function (prev, row) { return prev + processRow(row, columns, false); }, processRow(columns.map(function (x) { return x.label; }), columns, true));\n};\nexports.getHtml = function (gridResult, columns) {\n    return \"<table class=\\\"table table-bordered table-striped\\\"><thead><tr>\" + columns\n        .filter(function (c) { return c.visible; })\n        .reduce(function (prev, el) { return prev + \"<th>\" + (el.label || el.name) + \"</th>\"; }, '') + \"</tr></thead><tbody>\" + gridResult.reduce(function (prevRow, row) {\n        return prevRow + \"<tr>\" + objToArray(row).reduce(function (prev, cell, index) {\n            return !columns[index].visible ? prev : prev + \"<td>\" + getCellValue(columns[index].dataType, cell) + \"</td>\";\n        }, '') + \"</tr>\";\n    }, '') + \"</tbody></table>\";\n};\n"]},"metadata":{},"sourceType":"script"}